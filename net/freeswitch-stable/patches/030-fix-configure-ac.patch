--- a/configure.ac
+++ b/configure.ac
@@ -667,7 +667,7 @@ AC_ARG_ENABLE(core-pgsql-pkgconfig,
 	[AS_HELP_STRING([--disable-core-pgsql-pkgconfig], [Use pg_config to get PGQSL build options])],[enable_core_pgsql_pkgconfig="$enableval"],[enable_core_pgsql_pkgconfig="yes"])
 
 if test x"$enable_core_pgsql_support" = x"yes" ; then
-  AC_PATH_PROG([PG_CONFIG], [pg_config], [no])
+  AC_PATH_PROG([PG_CONFIG], [pg_config], [no], ["$PATH:${STAGING_DIR}/usr/bin"])
   AC_PATH_PROG([PKG_CONFIG], [pkg-config], [no])
     if test "$PKG_CONFIG" = "no" \
        || test x"$enable_core_pgsql_pkgconfig" = x"no" \
@@ -1273,17 +1273,38 @@ module_enabled() {
   grep -v -e "\#" -e "^\$" modules.conf | sed -e "s|^.*/||" | grep "^${1}\$" >/dev/null
 }
 
+AC_ARG_WITH(png,
+  [AS_HELP_STRING([--without-png],
+    [disable support for libpng])],
+  [with_png="$withval"],
+  [with_png="yes"])
+
+if test "$with_png" = "yes"; then
+  PKG_CHECK_MODULES([LIBPNG], [libpng >= 1.6.16],[
+    AM_CONDITIONAL([HAVE_PNG],[true])],[
+      PKG_CHECK_MODULES([LIBPNG], [libpng16 >= 1.6.16],[
+        AM_CONDITIONAL([HAVE_PNG],[true])],[
+          PKG_CHECK_MODULES([LIBPNG], [libpng >= 1.2.49],[
+            AM_CONDITIONAL([HAVE_PNG],[true])],[
+            AC_MSG_RESULT([no]); AM_CONDITIONAL([HAVE_PNG],[false])])])])
+else
+  AM_CONDITIONAL([HAVE_PNG],[false])
+fi
+
+AC_ARG_WITH(freetype,
+  [AS_HELP_STRING([--without-freetype],
+    [disable support for freetype])],
+  [with_freetype="$withval"],
+  [with_freetype="yes"])
+
+if test "$with_freetype" = "yes"; then
+  PKG_CHECK_MODULES([FREETYPE], [freetype2 >= 2.4.9],[
+    AM_CONDITIONAL([HAVE_FREETYPE],[true])],[
+    AC_MSG_RESULT([no]); AM_CONDITIONAL([HAVE_FREETYPE],[false])])
+else
+  AM_CONDITIONAL([HAVE_FREETYPE],[false])
+fi
 
-PKG_CHECK_MODULES([LIBPNG], [libpng >= 1.6.16],[
-  AM_CONDITIONAL([HAVE_PNG],[true])],[
-    PKG_CHECK_MODULES([LIBPNG], [libpng16 >= 1.6.16],[
-      AM_CONDITIONAL([HAVE_PNG],[true])],[
-        PKG_CHECK_MODULES([LIBPNG], [libpng >= 1.2.49],[
-          AM_CONDITIONAL([HAVE_PNG],[true])],[
-          AC_MSG_RESULT([no]); AM_CONDITIONAL([HAVE_PNG],[false])])])])
-PKG_CHECK_MODULES([FREETYPE], [freetype2 >= 2.4.9],[
-  AM_CONDITIONAL([HAVE_FREETYPE],[true])],[
-  AC_MSG_RESULT([no]); AM_CONDITIONAL([HAVE_FREETYPE],[false])])
 PKG_CHECK_MODULES([SQLITE], [sqlite3 >= 3.6.20])
 PKG_CHECK_MODULES([CURL], [libcurl >= 7.19])
 PKG_CHECK_MODULES([PCRE], [libpcre >= 7.8])
